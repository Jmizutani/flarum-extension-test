{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://user-profile/webpack/bootstrap","webpack://user-profile/webpack/runtime/compat get default export","webpack://user-profile/webpack/runtime/define property getters","webpack://user-profile/webpack/runtime/hasOwnProperty shorthand","webpack://user-profile/external root \"flarum.core.compat['forum/app']\"","webpack://user-profile/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://user-profile/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://user-profile/external root \"flarum.core.compat['common/Model']\"","webpack://user-profile/./js/src/common/models/UserProfile.js","webpack://user-profile/./js/src/common/models/ProfileField.js","webpack://user-profile/external root \"flarum.core.compat['common/Component']\"","webpack://user-profile/external root \"flarum.core.compat['common/components/Button']\"","webpack://user-profile/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://user-profile/external root \"flarum.core.compat['common/components/Modal']\"","webpack://user-profile/external root \"flarum.core.compat['common/components/Switch']\"","webpack://user-profile/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://user-profile/./js/src/common/components/UserProfileModal.js","webpack://user-profile/./js/src/common/components/UserProfileWidget.js","webpack://user-profile/external root \"flarum.core.compat['common/extend']\"","webpack://user-profile/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://user-profile/./js/src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class UserProfile extends Model {\n  userId = Model.attribute('userId');\n  facebookUrl = Model.attribute('facebookUrl');\n  xUrl = Model.attribute('xUrl');\n  instagramUrl = Model.attribute('instagramUrl');\n  isVisible = Model.attribute('isVisible');\n  customFields = Model.attribute('customFields');\n  createdAt = Model.attribute('createdAt', Model.transformDate);\n  updatedAt = Model.attribute('updatedAt', Model.transformDate);\n  \n  user = Model.hasOne('user');\n}","import Model from 'flarum/common/Model';\n\nexport default class ProfileField extends Model {\n  name = Model.attribute('name');\n  label = Model.attribute('label');\n  type = Model.attribute('type');\n  required = Model.attribute('required');\n  sortOrder = Model.attribute('sortOrder');\n  isActive = Model.attribute('isActive');\n  createdAt = Model.attribute('createdAt', Model.transformDate);\n  updatedAt = Model.attribute('updatedAt', Model.transformDate);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default class UserProfileModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    \n    const profile = this.attrs.profile || {};\n    \n    // プロフィールが関数の場合は実行して値を取得\n    const facebookUrl = typeof profile.facebookUrl === 'function' ? profile.facebookUrl() : profile.facebookUrl;\n    const xUrl = typeof profile.xUrl === 'function' ? profile.xUrl() : profile.xUrl;\n    const instagramUrl = typeof profile.instagramUrl === 'function' ? profile.instagramUrl() : profile.instagramUrl;\n    const isVisible = typeof profile.isVisible === 'function' ? profile.isVisible() : profile.isVisible;\n    const customFields = typeof profile.customFields === 'function' ? profile.customFields() : profile.customFields;\n    \n    this.facebookUrl = Stream(facebookUrl || '');\n    this.xUrl = Stream(xUrl || '');\n    this.instagramUrl = Stream(instagramUrl || '');\n    this.isVisible = Stream(isVisible !== undefined ? isVisible : true);\n    this.loading = false;\n    this.fieldsLoading = true;\n    this.fields = [];\n    this.customFields = {};\n    \n    // カスタムフィールドの初期化\n    if (customFields) {\n      this.customFields = { ...customFields };\n    }\n    \n    this.loadFields();\n  }\n\n  loadFields() {\n    app.store.find('profile-fields')\n      .then(fields => {\n        this.fields = fields.sort((a, b) => a.sortOrder() - b.sortOrder());\n        \n        // カスタムフィールドのStreamを初期化\n        this.fields.forEach(field => {\n          if (!this.customFields[field.name()]) {\n            this.customFields[field.name()] = Stream('');\n          } else {\n            this.customFields[field.name()] = Stream(this.customFields[field.name()]);\n          }\n        });\n        \n        this.fieldsLoading = false;\n        m.redraw();\n      })\n      .catch(() => {\n        this.fieldsLoading = false;\n        m.redraw();\n      });\n  }\n\n  className() {\n    return 'UserProfileModal Modal--large';\n  }\n\n  title() {\n    return 'プロフィール編集';\n  }\n\n  content() {\n    if (this.fieldsLoading) {\n      return (\n        <div className=\"Modal-body\">\n          <div className=\"LoadingIndicator\"></div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">\n          {/* カスタムフィールド */}\n          {this.fields.map(field => this.renderCustomField(field))}\n          \n          {/* ソーシャルリンク */}\n          <div className=\"Form-group\">\n            <h4>ソーシャルリンク</h4>\n          </div>\n          \n          <div className=\"Form-group\">\n            <label>Facebook URL</label>\n            <input\n              className=\"FormControl\"\n              type=\"url\"\n              value={this.facebookUrl()}\n              oninput={(e) => this.facebookUrl(e.target.value)}\n              placeholder=\"https://facebook.com/username\"\n            />\n          </div>\n          \n          <div className=\"Form-group\">\n            <label>X (Twitter) URL</label>\n            <input\n              className=\"FormControl\"\n              type=\"url\"\n              value={this.xUrl()}\n              oninput={(e) => this.xUrl(e.target.value)}\n              placeholder=\"https://x.com/username\"\n            />\n          </div>\n          \n          <div className=\"Form-group\">\n            <label>Instagram URL</label>\n            <input\n              className=\"FormControl\"\n              type=\"url\"\n              value={this.instagramUrl()}\n              oninput={(e) => this.instagramUrl(e.target.value)}\n              placeholder=\"https://instagram.com/username\"\n            />\n          </div>\n          \n          <div className=\"Form-group\">\n            <Switch\n              state={this.isVisible()}\n              onchange={this.isVisible}\n            >\n              プロフィールを他のユーザーに公開する\n            </Switch>\n          </div>\n          \n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary\"\n              type=\"submit\"\n              loading={this.loading}\n            >\n              保存\n            </Button>\n            <Button\n              className=\"Button Button--default\"\n              onclick={this.hide.bind(this)}\n            >\n              キャンセル\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderCustomField(field) {\n    const stream = this.customFields[field.name()];\n    \n    if (!stream) {\n      return null;\n    }\n\n    return (\n      <div key={field.id()} className=\"Form-group\">\n        <label>\n          {field.label()}\n          {field.required() && <span className=\"required\">*</span>}\n        </label>\n        {field.type() === 'textarea' ? (\n          <textarea\n            className=\"FormControl\"\n            value={stream()}\n            oninput={(e) => stream(e.target.value)}\n            rows=\"4\"\n            placeholder={`${field.label()}を入力してください`}\n            required={field.required()}\n          />\n        ) : (\n          <input\n            className=\"FormControl\"\n            type=\"text\"\n            value={stream()}\n            oninput={(e) => stream(e.target.value)}\n            placeholder={`${field.label()}を入力してください`}\n            required={field.required()}\n          />\n        )}\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n    \n    // 必須フィールドのチェック\n    for (const field of this.fields) {\n      if (field.required() && field.isActive()) {\n        const stream = this.customFields[field.name()];\n        if (!stream || !stream().trim()) {\n          alert(`${field.label()}は必須項目です。`);\n          return;\n        }\n      }\n    }\n    \n    this.loading = true;\n    m.redraw();\n    \n    const customFieldsData = {};\n    for (const field of this.fields) {\n      const stream = this.customFields[field.name()];\n      if (stream) {\n        customFieldsData[field.name()] = stream();\n      }\n    }\n    \n    const data = {\n      userId: app.session.user.id(),\n      facebookUrl: this.facebookUrl(),\n      xUrl: this.xUrl(),\n      instagramUrl: this.instagramUrl(),\n      isVisible: this.isVisible(),\n      customFields: customFieldsData\n    };\n    \n    app.store.createRecord('user-profiles')\n      .save(data)\n      .then(() => {\n        this.hide();\n        m.redraw();\n      })\n      .catch(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport UserProfileModal from './UserProfileModal';\n\nexport default class UserProfileWidget extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.user = this.attrs.user;\n    this.profile = null;\n    this.fields = [];\n    this.loading = true;\n    this.fieldsLoading = true;\n    \n    this.loadProfile();\n    this.loadFields();\n  }\n\n  loadProfile() {\n    app.store.find('user-profiles', { userId: this.user.id() })\n      .then(profile => {\n        this.profile = profile;\n        this.loading = false;\n        m.redraw();\n      })\n      .catch(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  loadFields() {\n    app.store.find('profile-fields')\n      .then(fields => {\n        this.fields = fields.sort((a, b) => a.sortOrder() - b.sortOrder());\n        this.fieldsLoading = false;\n        m.redraw();\n      })\n      .catch(() => {\n        this.fieldsLoading = false;\n        m.redraw();\n      });\n  }\n\n  view() {\n    if (this.loading || this.fieldsLoading) {\n      return <div className=\"UserProfileWidget\">読み込み中...</div>;\n    }\n\n    const isOwnProfile = app.session.user && app.session.user.id() === this.user.id();\n    const canView = this.profile && (this.profile.isVisible() || isOwnProfile || (app.session.user && app.session.user.isAdmin()));\n\n    return (\n      <div className=\"UserProfileWidget\">\n        <div className=\"UserProfileWidget-header\">\n          <h3>プロフィール</h3>\n          {isOwnProfile && (\n            <Button\n              className=\"Button Button--primary Button--small\"\n              onclick={() => app.modal.show(UserProfileModal, { profile: this.profile })}\n            >\n              編集\n            </Button>\n          )}\n        </div>\n        \n        {canView && this.profile ? (\n          <div className=\"UserProfileWidget-content\">\n            {/* カスタムフィールドの表示 */}\n            {this.renderCustomFields()}\n            \n            {/* ソーシャルリンク */}\n            {(this.profile.facebookUrl() || this.profile.xUrl() || this.profile.instagramUrl()) && (\n              <div className=\"UserProfileWidget-section\">\n                <h4>ソーシャルリンク</h4>\n                <div className=\"UserProfileWidget-socialLinks\">\n                  {this.profile.facebookUrl() && (\n                    <a href={this.profile.facebookUrl()} target=\"_blank\" rel=\"noopener noreferrer\">\n                      Facebook\n                    </a>\n                  )}\n                  {this.profile.xUrl() && (\n                    <a href={this.profile.xUrl()} target=\"_blank\" rel=\"noopener noreferrer\">\n                      X (Twitter)\n                    </a>\n                  )}\n                  {this.profile.instagramUrl() && (\n                    <a href={this.profile.instagramUrl()} target=\"_blank\" rel=\"noopener noreferrer\">\n                      Instagram\n                    </a>\n                  )}\n                </div>\n              </div>\n            )}\n            \n            {!this.profile.isVisible() && isOwnProfile && (\n              <div className=\"UserProfileWidget-section\">\n                <em>このプロフィールは非公開に設定されています。</em>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"UserProfileWidget-content\">\n            {isOwnProfile ? (\n              <div className=\"UserProfileWidget-empty\">\n                <p>プロフィールが設定されていません。</p>\n                <Button\n                  className=\"Button Button--primary\"\n                  onclick={() => app.modal.show(UserProfileModal, { profile: null })}\n                >\n                  プロフィールを作成\n                </Button>\n              </div>\n            ) : (\n              <div className=\"UserProfileWidget-empty\">\n                <p>プロフィールは非公開に設定されています。</p>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  renderCustomFields() {\n    if (!this.profile || !this.profile.customFields) {\n      return null;\n    }\n\n    const customFields = this.profile.customFields();\n    const sections = [];\n\n    this.fields.forEach(field => {\n      if (field.isActive() && customFields && customFields[field.name()]) {\n        sections.push(\n          <div key={field.id()} className=\"UserProfileWidget-section\">\n            <h4>{field.label()}</h4>\n            <p>{customFields[field.name()]}</p>\n          </div>\n        );\n      }\n    });\n\n    return sections;\n  }\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","import app from 'flarum/forum/app';\nimport UserProfile from '../common/models/UserProfile';\nimport ProfileField from '../common/models/ProfileField';\nimport UserProfileWidget from '../common/components/UserProfileWidget';\nimport { extend } from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\n\napp.initializers.add('junya-user-profile', () => {\n  app.store.models['user-profiles'] = UserProfile;\n  app.store.models['profile-fields'] = ProfileField;\n  \n  extend(UserPage.prototype, 'sidebarItems', function (items) {\n    items.add('userProfile', \n      <UserProfileWidget user={this.user} />,\n      10\n    );\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","UserProfile","_Model","_this","_len","arguments","length","args","Array","_key","apply","concat","userId","Model","facebookUrl","xUrl","instagramUrl","isVisible","customFields","createdAt","updatedAt","user","ProfileField","name","label","type","required","sortOrder","isActive","_extends","assign","n","r","UserProfileModal","_Modal","_proto","oninit","vnode","profile","this","attrs","Stream","undefined","loading","fieldsLoading","fields","loadFields","app","store","find","then","sort","b","forEach","field","m","redraw","className","title","content","_this2","map","renderCustomField","value","oninput","target","placeholder","Switch","state","onchange","Button","onclick","hide","stream","id","rows","onsubmit","_this3","preventDefault","_step","_iterator","_createForOfIteratorHelperLoose","done","trim","alert","_step2","customFieldsData","_iterator2","data","session","createRecord","save","Modal","UserProfileWidget","_Component","loadProfile","view","isOwnProfile","canView","isAdmin","modal","show","renderCustomFields","href","rel","sections","push","Component","add","models","extend","UserPage","items"],"sourceRoot":""}